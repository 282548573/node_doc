# IPFS ArsDrive Android_V1.0详细功能设计及开发计划

## 修改及重要节点记录

|修改日期|版本号|修改简述|评审日期|计划节点|通过评审|修改人|评审人|
|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
|2019-11-15|v1.0|Android V1.0启动|2019-11-15|- |√|Sky|Lewen,Dis,Key,Hugo|
|2019-11-15|v1.0|Android V1.0选型|2019-11-15|- |√|Sky|Dis,Lewen,Key,Hugo|
|2019-11-21|v1.0|Android V1.0框架确认、输出框架文档|2019-11-25|- |√|Sky|Dis,Lewen,Key,Hugo|
|2019-11-25|v1.0|Android V1.0详细功能及计划|2019-11-25|- |√|Sky|Dis,Lewen,Key,Hugo|
|2019-11-25|v1.0|Android V1.0代码启动|2019-11-25|2019-11-29|√|Sky|Dis,Lewen,Key,Hugo|
|2019-11-29|v1.0|框架搭建、基本组件完成、UI\UE同步设计|-|2019-12-6|√|Sky|Dis,Lewen,Key,Huge|
|2019-12-6|v1.1|局域网节点发现、钱包技术、登录模块、UI\UE同步设计|-|2019-12-13|√|Sky|Dis,Lewen,Key,Hugo|
|2019-12-13|v1.2|多媒体模块、节点管理模块、个人文件模块、列表、操作、打开、UI\UE同步设计|-|2019-12-20|√|Sky|Dis,Lewen,Key,Hugo|
|2019-12-20|v1.3|快照模块、分享模块、我的模块、UI\UE同步设计|-|2019-12-26|√|Sky|Dis,Lewen,Key,Hugo|
|2019-12-26|v1.4|传输模块、穿透模块|-|2019-01-04|√|Sky|Dis,Lewen,Key,Hugo|
|2019-01-06|v1.5|节点圈模块、列表、操作、打开、分享到个人文件、上传到、下载对接|-|2019-1-10|-|Sky|Dis,Lewen,Key,Hugo|
|-|v1.6|客户端升级、国际化|-|-|-|-|-|
## 目录

- [1 约定说明](#1-约定说明)
    - [1.1 框架划分说明](#11-框架划分说明)
    - [1.2 功能划分说明](#12-功能划分说明)
    - [1.3 思想重用说明](#13-思想重用说明)
    - [1.4 版本号规则约定](#14-版本号规则约定)
- [2 开发环境](#2-开发环境)
- [3 搭建环境](#3-搭建环境)
- [4 第三方、封装、自定义组件](#4-第三方封装自定义组件)
    - [4.1 组件第三方](#41-组件第三方)
    - [4.2 封装、自定义组件](#42-封装自定义组件)
- [5 功能性规格表](#5-功能性规格表)
    - [5.1 登录模块](#51-登录模块)
    - [5.2 节点管理模块](#52-节点管理模块)
    - [5.3 快照模块](#53-快照模块)
    - [5.4 个人文件模块](#54-个人文件模块)
    - [5.5 节点圈模块](#55-节点圈模块)
    - [5.6 视频播放器模块](#56-视频播放器模块)
    - [5.7 音乐播放器模块](#57-音乐播放器模块)
    - [5.8 图片浏览器模块](#58-图片浏览器模块)
    - [5.9 传输模块](#59-传输模块)
    - [5.10 我的模块](#510-我的模块)
    - [5.11 用户管理模块](#511-账号管理模块)
    - [5.12 客户端升级模块](#512-客户端升级模块)
    - [5.13 穿透模块](#513-穿透模块)
## 1 约定说明

### 1.1 框架划分说明

|大类|说明|
|:--:|:--:|
|壳|加载模块|
|权限|移动端权限控制|
|模块|业务逻辑、数据结构、视图（MVP结构）|
|自定义组件|封装|
|第三方组件|验证|

- 回到[目录](#目录)

### 1.2 功能划分说明

|功能|类别|
|:--:|:--:|
|功能|局域网发现节点|
|功能|登录|
|功能|节点管理|
|功能|钱包技术|
|功能|个人文件|
|功能|节点圈|
|功能|快照|
|功能|多媒体打开|
|功能|分享|
|功能|我的|
|功能|外网穿透|
- 回到[目录](#目录)

### 1.3 思想重用说明

- 该框架思想可以用于各个客户端
- 解耦
- 可更换第三方组件
- 代码结构清晰
- 重读代码简单
- 市场通用
- 模块可拆卸

- 回到[目录](#目录)

### 1.4 版本号规则约定

- 版本号格式：vA.B.C
- A表示大版本号，只有当发生兼容性问题的时候才予以变更
- B表示小版本号，当新增功能的时候递增
- C，在特定大小版本基础上，修复了之前的Bug时候递增
- 由于客户端一代及其二代已经存在，初始版本递增为v1.0.0

- 回到[目录](#目录)

## 2 开发环境

|名称|版本|备注|
|:--:|:--:|:--:|
|Java to Kotlin|-|-|
|Swift to Kotlin|-|-|
|Android Studio|3.4|-|
|Gradle|4.6|-|
|compileSdk| 28|-|
|buildTools|28.0.3|-|

## 3 搭建环境

|工作|说明|状态|规划版本|备注|
|:--:|:--:|:--:|:--:|:--:|
|选型|[开发环境](#开发环境)|√|v1.0|-|
|验证第三方组件|[组件第三方](#41-组件第三方)|√|v1.0|-|
|工程结构方案讨论|参与：Lewen,Dis,Key,Hugo|√|v1.0|-|
|工程结构方案确定|基本确定，模块分类，接口跨模块，解耦|√|v1.0|-|
|工程结构方案落实|落实：Lewen,Dis,Key,Hugo|√|v1.0|-|



## 4 第三方、封装、自定义组件

### 4.1 组件第三方

|名称|版本|说明|
|:--:|:--:|:--:|
|Koin|2.0.1|工厂模式注入对象|
|RxKotlin|2.3.0|观察者模式线程处理|
|RxJava|2.3.0|观察者模式线程处理|
|RxAndroid|2.1.1|观察者模式线程处理|
|AutoDispose|1.2.0|生命周期管理|
|OkHttp|3.12.0|Http协议|
|Retrofit|2.4.0|http协议框架|

### 4.2 封装、自定义组件

|组件|说明|状态|规划版本|备注|
|:--:|:--:|:--:|:--:|:--:|
|Https组件|请求接口|√|v1.0|-|
|Sqlite组件|缓存|√|v1.0|-|
|配置文件组件|缓存|√|v1.0|-|
|加密组件|加密|√|v1.0|-|
|网络组件|-|√|v1.0|-|
|钱包组件|-|√|v1.1|-|
|视频组件|-|√|v1.2|-|
|音乐组件|-|√|v1.2|-|
|图片缓存组件|-|√|v1.2|-|
|传输组件|-|√|v1.5|-|

## 5 功能性规格表

### 5.1 登录模块

|功能|子功能|说明|状态|规划版本|备注|
|:--:|:--:|:--:|:--:|:--:|:--:|
|app启动页加载|时间5秒|包含自动登录|√|v1.1|-|
|登录|第一次使用|-|√|v1.1|-|
|登录|钱包登录|-|√|v1.1|-|
|登录|助记词生成|英文、中文|√|v1.1|-|
|登录|找回钱包|英文、中文|√|v1.1|-|
|登录|自动登录|取缓存|√|v1.1|-|
|登录|局域网节点发现|UDP广播|√|v1.1|-|
|登录|退出登录|-|√|v1.1|-|

- 回到[目录](#目录)

-------------------------------------

### 5.2 节点管理模块

|功能|子功能|说明|状态|规划版本|备注|
|:--:|:--:|:--:|:--:|:--:|:--:|
|节点列表|局域网在线|-|√|v1.2|-|
|节点列表|刷新|-|√|v1.2|-|
|节点列表|节点切换|-|√|v1.2|-
|节点列表|修改备注|-|√|v1.2|-|
|节点初始化|-|-|√|v1.2|-|
|节点分享|邀请码邀请|-|√|v1.2|-|
|远程访问地址|-|-|√|v1.2|-|


- 回到[目录](#目录)

-------------------------------------

### 5.3 快照模块 

- 目的： 目的是备份、恢复用户数据的版本，类型Git功能
- 实现 ：基于IPFS节点存储个人文件的根hash


|功能|子功能|说明|状态|规划版本|备注|
|:--:|:--:|:--:|:--:|:--:|:--:|
|快照列表|加载|-|√|v1.3|-|
|快照列表|删除|-|√|v1.3|-|
|快照列表|修改名称|-|√|v1.3|-|
|快照列表|恢复|-|√|v1.3|-|
|快照列表|保存|-|√|v1.3|-|
- 回到[目录](#目录)

-------------------------------------

### 5.4 个人文件模块

|功能|子功能|说明|状态|规划版本|备注|
|:--:|:--:|:--:|:--:|:--:|:--:|
|个人文件列表|加载|-|√|v1.2|-|
|个人文件列表|显示模式|List样式|√|v1.2|-|
|个人文件列表|路径模式|-|√|v1.2|-|
|个人文件列表|选择|单选/多选/全选/取消全部|√|v1.2|-|
|个人文件列表|历史导航|-|√|v1.2|-|
|个人文件列表|刷新|自动/手动|√|v1.2|-|
|个人文件列表|缓存|-|√|v1.2|-|
|个人文件列表|跳转到指定目录|-|√|v1.2|-|
|个人文件列表|路径选择|-|√|v1.2|-|
|个人文件列表|新建文件夹|-|√|v1.2|-|
|个人文件列表|重命名|-|√|v1.2|-|
|个人文件列表|复制|-|√|v1.2|-|
|个人文件列表|移动|-|√|v1.2|-|
|个人文件列表|粘贴|-|√|v1.2|-|
|个人文件列表|删除|-|√|v1.2|-|
|个人文件列表|打开视频|跳转到视频模块|√|v1.2|-|
|个人文件列表|打开图片|跳转到图片模块|√|v1.2|-|
|个人文件列表|打开音乐|跳转到音乐模块|√|v1.2|-|
|个人文件列表|分享到第三方|-|√|v1.2|-|
|个人文件列表|分享到节点圈|-|√|v1.2|-|
|个人文件列表|上传|添加到上传列表|-|v1.5|-|
|个人文件列表|下载|添加到下载列表|-|v1.5|-|
|个人文件列表|打开文档|命中缓存|-|-|-|


- 回到[目录](#目录)

-------------------------------------

### 5.5 节点圈模块

|功能|子功能|说明|状态|规划版本|备注|
|:--:|:--:|:--:|:--:|:--:|:--:|
|节点圈列表|分页加载|-|-|v1.5|-|
|节点圈列表|加载|-|-|v1.5|-|
|节点圈列表|显示模式|List样式|-|v1.5|-|
|节点圈列表|路径模式|-|-|v1.5|-|
|节点圈列表|选择|单选/多选/全选/取消全部|-|v1.5|-|
|节点圈列表|历史导航|-|-|v1.5|-|
|节点圈列表|刷新|手动|-|v1.5|-|
|节点圈列表|缓存|-|-|v1.5|-|
|节点圈列表|跳转到指定目录|-|-|v1.5|-|
|节点圈列表|路径选择|-|-|v1.5|-|
|节点圈列表|新建文件夹|-|-|v1.5|-|
|节点圈列表|重命名|-|-|v1.5|-|
|节点圈列表|复制|-|-|v1.5|-|
|节点圈列表|移动|-|-|v1.5|-|
|节点圈列表|粘贴|-|-|v1.5|-|
|节点圈列表|删除|-|-|v1.5|-|
|节点圈列表|打开视频|跳转到视频模块|-|v1.5|-|
|节点圈列表|打开图片|跳转到图片模块|-|v1.5|-|
|节点圈列表|打开音乐|跳转到音乐模块|-|v1.5|-|
|节点圈列表|分享到第三方|-|-|v1.5|-|
|节点圈列表|分享到个人文件|-|-|v1.5|-|
|节点圈列表|上传|添加到上传列表|-|v1.5|-|
|节点圈列表|下载|添加到下载列表|-|v1.5|-|
|节点圈列表|打开文档|命中缓存|-|-|-|

- 回到[目录](#目录)

-------------------------------------

### 5.6 视频播放器模块

|功能|子功能|说明|状态|规划版本|备注|
|:--:|:--:|:--:|:--:|:--:|:--:|
|视频播放器|单例|-|√|v1.2|-|
|视频播放器|暂停|-|√|v1.2|-|
|视频播放器|继续|-|√|v1.2|-|
|视频播放器|进度调节|-|√|v1.2|-|
|视频播放器|音量调节|-|√|v1.2|-|
|视频播放器|锁屏|-|√|v1.2|-|

- 回到[目录](#目录)

-------------------------------------

### 5.7 音乐播放器模块

|功能|子功能|说明|状态|规划版本|备注|
|:--:|:--:|:--:|:--:|:--:|:--:|
|音乐播放器|单例|-|√|v1.2|-|
|音乐播放器|列表|-|√|v1.2|-|
|音乐播放器|上一首|-|√|v1.2|-|
|音乐播放器|下一首|-|√|v1.2|-|
|音乐播放器|循环模式|-|√|v1.2|-|
|音乐播放器|暂停|-|√|v1.2|-|
|音乐播放器|继续|-|√|v1.2|-|
|音乐播放器|进度调节|-|√|v1.2|-|
|音乐播放器|音量调节|-|√|v1.2|-|
|音乐播放器|锁屏|-|√|v1.2|-|

- 回到[目录](#目录)

-------------------------------------

### 5.8 图片浏览器模块

|功能|子功能|说明|状态|规划版本|备注|
|:--:|:--:|:--:|:--:|:--:|:--:|
|图片浏览器模块|单例|-|√|v1.2|-|
|图片浏览器模块|列表|-|√|v1.2|-|
|图片浏览器模块|上一张|-|√|v1.2|-|
|图片浏览器模块|下一张|-|√|v1.2|-|
|图片浏览器模块|原图|-|√|v1.2|-|
|图片浏览器模块|缩放|-|√|v1.2|-|


- 回到[目录](#目录)

-------------------------------------

### 5.9 传输模块 

备注：上传接口无断点续传

|功能|子功能|说明|状态|规划版本|备注|
|:--:|:--:|:--:|:--:|:--:|:--:|
|上下传类封装|-|基于http|√|v1.5|-|
|上传中列表|获取信息|-|√|v1.5|-|
|上传中列表|删除|-|√|v1.5|-|
|上传中列表|入库|-|√|v1.5|-|
|上传完成列表|获取|-|√|v1.5|-|
|上传完成列表|删除|-|√|v1.5|-|
|下载中列表|获取信息|-|√|v1.5|-|
|下载中列表|暂停|-|√|v1.5|-|
|下载中列表|继续|-|√|v1.5|-|
|下载中列表|删除|-|√|v1.5|-|
|下载中列表|入库|-|√|v1.5|-|
|下载完成列表|获取|-|√|v1.5|-|
|下载完成列表|删除|-|√|v1.5|-|

- 回到[目录](#目录)

-------------------------------------





### 5.10 我的模块

|功能|子功能|说明|状态|规划版本|备注|
|:--:|:--:|:--:|:--:|:--:|:--:|
|账号管理|-|-|√|v1.3|-|
|应用设置|-|-|√|v1.3|-|
|关于我们|版本更新|-|√|v1.3|-|
|关于我们|免责声明|-|√|v1.3|-|
|先河系统|-|-|√|v1.3|-|

- 回到[目录](#目录)

-------------------------------------

### 5.11 账号管理模块

|功能|子功能|说明|状态|规划版本|备注|
|:--:|:--:|:--:|:--:|:--:|:--:|
|我的助记词|-|-|√|v1.3|-|
|节点列表|-|-|√|v1.3|-|
|清除账号数据|-|-|√|v1.3|-|
|切换账号|-|-|√|v1.3|-|
|退出账号|-|-|√|v1.3|-|

- 回到[目录](#目录)

-------------------------------------

### 5.12 客户端升级模块
|功能|子功能|说明|状态|规划版本|备注|
|:--:|:--:|:--:|:--:|:--:|:--:|
|客户端升级|获取类型|-|-|v1.6|-|
|客户端升级|强制|-|-|v1.6|-|
|客户端升级|手动|-|-|v1.6|-|
|客户端升级|状态|-|-|v1.6|-|
|客户端升级|覆盖版本|-|-|v1.6|-|
- 回到[目录](#目录)

### 5.13 穿透模块

|功能|子功能|说明|状态|规划版本|备注|
|:--:|:--:|:--:|:--:|:--:|:--:|
|穿透配置|-|-|√|v1.5|-|
|穿透代理|-|-|√|v1.5|-|